{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from '../Controllers/axios';\nimport useAuth from './useAuth';\n\nconst useRefreshToken = () => {\n  _s();\n\n  const {\n    auth,\n    setAuth\n  } = useAuth();\n\n  const refresh = async () => {\n    const response = await axios.get('/api/refresh', {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + auth.accessToken\n      },\n      withCredentials: true\n    });\n    setAuth(prev => {\n      console.log(JSON.stringify(prev));\n      console.log('inside use refresh token', response.data.accessToken);\n      return { ...prev,\n        roles: response.data.roles,\n        accessToken: response.data.accessToken\n      };\n    });\n    return response.data.accessToken;\n  };\n\n  return refresh;\n};\n\n_s(useRefreshToken, \"Z+9gaxjkm/81bihlzr2JZJNbKWI=\", false, function () {\n  return [useAuth];\n});\n\nexport default useRefreshToken;","map":{"version":3,"names":["axios","useAuth","useRefreshToken","auth","setAuth","refresh","response","get","headers","accessToken","withCredentials","prev","console","log","JSON","stringify","data","roles"],"sources":["/Users/alirahmani/Project/blog_project/src/hooks/useRefreshToken.js"],"sourcesContent":["import axios from '../Controllers/axios';\nimport useAuth from './useAuth';\n\nconst useRefreshToken = () => {\n    const { auth,setAuth } = useAuth();\n\n    const refresh = async () => {\n        const response = await axios.get('/api/refresh', {\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.accessToken\n            },\n            withCredentials: true\n        });\n        setAuth(prev => {\n            console.log(JSON.stringify(prev));\n            console.log('inside use refresh token',response.data.accessToken);\n            return {\n                ...prev,\n                roles: response.data.roles,\n                accessToken: response.data.accessToken\n            }\n        });\n        return response.data.accessToken;\n    }\n    return refresh;\n};\n\nexport default useRefreshToken;\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,sBAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,eAAe,GAAG,MAAM;EAAA;;EAC1B,MAAM;IAAEC,IAAF;IAAOC;EAAP,IAAmBH,OAAO,EAAhC;;EAEA,MAAMI,OAAO,GAAG,YAAY;IACxB,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,GAAN,CAAU,cAAV,EAA0B;MAC7CC,OAAO,EAAE;QACL,gBAAgB,kBADX;QAEL,iBAAiB,YAAYL,IAAI,CAACM;MAF7B,CADoC;MAK7CC,eAAe,EAAE;IAL4B,CAA1B,CAAvB;IAOAN,OAAO,CAACO,IAAI,IAAI;MACZC,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAZ;MACAC,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAuCP,QAAQ,CAACU,IAAT,CAAcP,WAArD;MACA,OAAO,EACH,GAAGE,IADA;QAEHM,KAAK,EAAEX,QAAQ,CAACU,IAAT,CAAcC,KAFlB;QAGHR,WAAW,EAAEH,QAAQ,CAACU,IAAT,CAAcP;MAHxB,CAAP;IAKH,CARM,CAAP;IASA,OAAOH,QAAQ,CAACU,IAAT,CAAcP,WAArB;EACH,CAlBD;;EAmBA,OAAOJ,OAAP;AACH,CAvBD;;GAAMH,e;UACuBD,O;;;AAwB7B,eAAeC,eAAf"},"metadata":{},"sourceType":"module"}