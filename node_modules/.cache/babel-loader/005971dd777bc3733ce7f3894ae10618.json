{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alirahmani/Project/blog_project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/alirahmani/Project/blog_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var apiUrl=\"https://boardgame-backend-mongodb.herokuapp.com\";//testt\n//LOGIN>>>>>>>>>>>>>>>>>>>>>>\nfunction loginControl(_x){return _loginControl.apply(this,arguments);}//REGISTER>>>>>>>>>>>>>>>>>>>>\nfunction _loginControl(){_loginControl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var username,password,response,tok;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username=_ref.username,password=_ref.password;_context.next=3;return fetch(apiUrl+'/api/login',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({username:username,password:password})});case 3:response=_context.sent;if(!response.ok){_context.next=13;break;}_context.next=7;return response.json();case 7:tok=_context.sent;console.log(response);localStorage.setItem('token',tok.data);return _context.abrupt(\"return\",getBoardGames());case 13:_context.t0=console;_context.next=16;return response.json();case 16:_context.t1=_context.sent;_context.t0.log.call(_context.t0,'Error: ',_context.t1);throw Error('Login Failed');case 19:case\"end\":return _context.stop();}}},_callee);}));return _loginControl.apply(this,arguments);}function registerControl(_x2){return _registerControl.apply(this,arguments);}//CHANGE PASSWORD>>>>>>>>>>>>>>>>>>\nfunction _registerControl(){_registerControl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2){var username,password,response,err;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:username=_ref2.username,password=_ref2.password;_context2.next=3;return fetch(apiUrl+'/api/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})});case 3:response=_context2.sent;if(!response.ok){_context2.next=9;break;}console.log(response);return _context2.abrupt(\"return\",getBoardGames());case 9:_context2.next=11;return response.json();case 11:err=_context2.sent;console.log(err.error);console.log(response);case 14:return _context2.abrupt(\"return\",getBoardGames());case 15:case\"end\":return _context2.stop();}}},_callee2);}));return _registerControl.apply(this,arguments);}function changePassControl(_x3){return _changePassControl.apply(this,arguments);}function _changePassControl(){_changePassControl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref3){var password,accessToken,roles,response,err;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:password=_ref3.password,accessToken=_ref3.accessToken,roles=_ref3.roles;_context3.next=3;return fetch(apiUrl+'/api/change-password',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+accessToken},body:JSON.stringify({newPassword:password,token:localStorage.getItem('token')})});case 3:response=_context3.sent;if(!response.ok){_context3.next=9;break;}console.log(response);return _context3.abrupt(\"return\",getBoardGames());case 9:_context3.next=11;return response.json();case 11:err=_context3.sent;console.log(err.error);console.log('errorrr');case 14:case\"end\":return _context3.stop();}}},_callee3);}));return _changePassControl.apply(this,arguments);}function getBoardGames(){return _getBoardGames.apply(this,arguments);}function _getBoardGames(){_getBoardGames=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var response,result;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(apiUrl+'/api/boardgames');case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:result=_context4.sent;return _context4.abrupt(\"return\",result);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return _getBoardGames.apply(this,arguments);}function getSingleBoardGame(_x4){return _getSingleBoardGame.apply(this,arguments);}function _getSingleBoardGame(){_getSingleBoardGame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(slug){var response,result;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0://console.log(SingleGameTitle)\n//const slug = SingleGameTitle.replaceAll(\" \", \"_\").toLowerCase()\nconsole.log(slug);_context5.next=3;return fetch(apiUrl+'/api/boardgames/byslug/'+slug);case 3:response=_context5.sent;_context5.next=6;return response.json();case 6:result=_context5.sent;return _context5.abrupt(\"return\",result);case 8:case\"end\":return _context5.stop();}}},_callee5);}));return _getSingleBoardGame.apply(this,arguments);}function gameEdit(_x5){return _gameEdit.apply(this,arguments);}function _gameEdit(){_gameEdit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_ref4){var id,title,author,imgUrl,richText,publisher,accessToken,roles,response;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:id=_ref4.id,title=_ref4.title,author=_ref4.author,imgUrl=_ref4.imgUrl,richText=_ref4.richText,publisher=_ref4.publisher,accessToken=_ref4.accessToken,roles=_ref4.roles;_context6.next=3;return fetch(apiUrl+\"/api/boardgames/\".concat(id),{method:'Put',headers:{'Content-Type':'application/json','Authorization':'Bearer '+accessToken},body:JSON.stringify({title:title,author:author,imgUrl:imgUrl,richText:richText,publisher:publisher})});case 3:response=_context6.sent;if(!response.ok){_context6.next=6;break;}return _context6.abrupt(\"return\",getBoardGames());case 6:throw Error('Edit Game failed');case 7:case\"end\":return _context6.stop();}}},_callee6);}));return _gameEdit.apply(this,arguments);}function addBoardGames(_x6){return _addBoardGames.apply(this,arguments);}function _addBoardGames(){_addBoardGames=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(_ref5){var title,author,imgUrl,richText,publisher,accessToken,roles,response;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:title=_ref5.title,author=_ref5.author,imgUrl=_ref5.imgUrl,richText=_ref5.richText,publisher=_ref5.publisher,accessToken=_ref5.accessToken,roles=_ref5.roles;_context7.next=3;return fetch(apiUrl+'/api/boardgames',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+accessToken},body:JSON.stringify({title:title,author:author,imgUrl:imgUrl,richText:richText,publisher:publisher})});case 3:response=_context7.sent;if(!response.ok){_context7.next=6;break;}return _context7.abrupt(\"return\",getBoardGames());case 6:throw Error('Adding author failed');case 7:case\"end\":return _context7.stop();}}},_callee7);}));return _addBoardGames.apply(this,arguments);}function deleteBoardGames(_x7){return _deleteBoardGames.apply(this,arguments);}function _deleteBoardGames(){_deleteBoardGames=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(id){var response;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return fetch(apiUrl+\"/api/boardgames/\".concat(id.id),{method:'Delete',headers:{'Content-Type':'application/json','Authorization':'Bearer '+id.accessToken},body:JSON.stringify({id:id})});case 2:response=_context8.sent;if(!response.ok){_context8.next=5;break;}return _context8.abrupt(\"return\",getBoardGames());case 5:throw Error('Edit Game failed');case 6:case\"end\":return _context8.stop();}}},_callee8);}));return _deleteBoardGames.apply(this,arguments);}export{getBoardGames,addBoardGames,gameEdit,deleteBoardGames,/* registerControl,\n    loginControl, */getSingleBoardGame,changePassControl};","map":{"version":3,"names":["apiUrl","loginControl","username","password","fetch","method","headers","credentials","body","JSON","stringify","response","ok","json","tok","console","log","localStorage","setItem","data","getBoardGames","Error","registerControl","err","error","changePassControl","accessToken","roles","newPassword","token","getItem","result","getSingleBoardGame","slug","gameEdit","id","title","author","imgUrl","richText","publisher","addBoardGames","deleteBoardGames"],"sources":["/Users/alirahmani/Project/blog_project/src/Controllers/api.js"],"sourcesContent":["const apiUrl = \"https://boardgame-backend-mongodb.herokuapp.com\"\n//testt\n\n\n//LOGIN>>>>>>>>>>>>>>>>>>>>>>\n\nasync function loginControl( {username, password} ) {\n    \n    const response = await fetch( apiUrl + '/api/login', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n            username,\n            password\n        })\n    })\n    if (response.ok) {\n        const tok= await response.json()\n        console.log(response)\n        localStorage.setItem('token', tok.data)\n        \n        return getBoardGames()\n    }else{\n        console.log('Error: ',await response.json())\n        throw Error('Login Failed')\n    }\n    \n}\n\n//REGISTER>>>>>>>>>>>>>>>>>>>>\n\nasync function registerControl( {username, password} ) {\n    \n    const response = await fetch( apiUrl + '/api/register', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            username,\n            password\n        })\n    })\n    if (response.ok) {\n        console.log(response)\n        return getBoardGames()\n    }else{\n     const err=  await response.json()\n     console.log(err.error)\n     console.log(response)\n    }\n   return getBoardGames()\n}\n\n\n//CHANGE PASSWORD>>>>>>>>>>>>>>>>>>\nasync function changePassControl({password,accessToken,roles}){\n\n    const response = await fetch( apiUrl + '/api/change-password', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + accessToken\n        },\n        body: JSON.stringify({\n            newPassword: password,\n            token: localStorage.getItem('token')\n        })\n    })\n    if (response.ok) {\n        console.log(response)\n        return getBoardGames()\n    }else{\n     const err=  await response.json()\n     console.log(err.error)\n     console.log('errorrr')\n    }\n}\n\n\n\n\nasync function getBoardGames(){\n    const response =await fetch (apiUrl + '/api/boardgames') \n    const result =await response.json()\n    return result\n}\n\nasync function getSingleBoardGame(slug){\n    //console.log(SingleGameTitle)\n    //const slug = SingleGameTitle.replaceAll(\" \", \"_\").toLowerCase()\n    console.log(slug)\n    const response =await fetch (apiUrl + '/api/boardgames/byslug/' + slug) \n    const result =await response.json()\n    return result\n}\n\n\n\nasync function gameEdit({id,title,\n    author,\n    imgUrl,\n    richText,\n    publisher,accessToken,roles}){\n        \n    const response = await fetch (apiUrl + `/api/boardgames/${id}`,{\n        \n        method: 'Put',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + accessToken\n        },\n        body: JSON.stringify({title,\n            author,\n            imgUrl,\n            richText,\n            publisher})\n    })\n    if (response.ok) {\n        return getBoardGames()\n    }\n\n    throw Error('Edit Game failed')\n    \n}\n\n\nasync function addBoardGames( {title,\n    author,\n    imgUrl,\n    richText,\n    publisher,accessToken,roles} ) {\n        \n    const response = await fetch( apiUrl + '/api/boardgames', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + accessToken\n        },\n        body: JSON.stringify({title,\n            author,\n            imgUrl,\n            richText,\n            publisher})\n    })\n    if (response.ok) {\n        return getBoardGames()\n    }\n\n    throw Error('Adding author failed')\n    \n}\n\n\n\nasync function deleteBoardGames(id){\n    const response =await fetch (apiUrl + `/api/boardgames/${id.id}`,{\n        \n        method: 'Delete',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + id.accessToken\n        },\n        body: JSON.stringify({id})\n    })\n    if (response.ok) {\n        \n        return getBoardGames()\n    }\n\n    throw Error('Edit Game failed')\n}\n\n\n\n\nexport  {\n    getBoardGames,\n    addBoardGames,\n    gameEdit,\n    deleteBoardGames,\n    /* registerControl,\n    loginControl, */\n    getSingleBoardGame,\n    changePassControl\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}